<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>calendar {{ year }}</title>
  <meta property="og:title" content="index.life" />
  <meta property="og:description" content="mood book" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="{{ url_for('static', filename='images/android-chrome-512x512.png', _external=True) }}" />
  <!-- Основные favicon -->
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">

  <!-- iOS Safari (для добавления на рабочий стол iPhone) -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">

  <!-- Android Chrome -->
  <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='images/android-chrome-192x192.png') }}">
  <link rel="icon" type="image/png" sizes="512x512" href="{{ url_for('static', filename='images/android-chrome-512x512.png') }}">

  <!-- Web App Manifest (для PWA функций) -->
  <link rel="manifest" href="{{ url_for('static', filename='images/site.webmanifest') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/calendar.css') }}">
</head>
<body>
  <header class="main-header">
    <nav class="top-menu">
      <a href="{{ url_for('main.mood_grid') }}" class="menu-link">index.life</a>
      <a href="{{ url_for('main.account') }}" class="menu-link">account</a>
      <a href="{{ url_for('main.what_is_index') }}" class="menu-link">what is index.life?</a>
    </nav>
  </header>
  <div style="text-align: center; margin: 20px 0;">
    <p class="calendar-title" style="font-weight: normal; margin-bottom: 16px;">
      calendar<sup>{{ year }}</sup>
      {% if year != current_year %}
        <span style="font-size: 16px; color: #888; margin-left: 10px;">(archive)</span>
      {% endif %}
    </p>

    <!-- Year Navigation -->
    {% if available_years|length > 1 and year in available_years %}
      <div style="display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 20px;">
        {% set year_index = available_years.index(year) %}

        <!-- Previous year button -->
        {% if year_index < available_years|length - 1 %}
          <a href="{{ url_for('main.mood_grid', year=available_years[year_index + 1]) }}"
             style="padding: 8px 16px; background: #f0f0f0; border-radius: 6px; text-decoration: none; color: #333; font-size: 14px; transition: all 0.2s;"
             onmouseover="this.style.background='#e0e0e0'"
             onmouseout="this.style.background='#f0f0f0'">
            ← {{ available_years[year_index + 1] }}
          </a>
        {% else %}
          <span style="padding: 8px 16px; background: #f8f8f8; border-radius: 6px; color: #ccc; font-size: 14px;">
            ← older
          </span>
        {% endif %}

        <!-- Year selector dropdown -->
        <select onchange="window.location.href='{{ url_for('main.mood_grid', year=0) }}'.replace('/0', '/' + this.value)"
                style="padding: 8px 12px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: white; cursor: pointer;">
          {% for y in available_years %}
            <option value="{{ y }}" {% if y == year %}selected{% endif %}>
              {{ y }}{% if y == current_year %} (current){% endif %}
            </option>
          {% endfor %}
        </select>

        <!-- Next year button -->
        {% if year_index > 0 %}
          <a href="{{ url_for('main.mood_grid', year=available_years[year_index - 1]) }}"
             style="padding: 8px 16px; background: #f0f0f0; border-radius: 6px; text-decoration: none; color: #333; font-size: 14px; transition: all 0.2s;"
             onmouseover="this.style.background='#e0e0e0'"
             onmouseout="this.style.background='#f0f0f0'">
            {{ available_years[year_index - 1] }} →
          </a>
        {% else %}
          <span style="padding: 8px 16px; background: #f8f8f8; border-radius: 6px; color: #ccc; font-size: 14px;">
            newer →
          </span>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <main>
    <div class="calendar-grid">
      {% for month in months %}
        <div class="month-block">
          <div class="month-grid">
            {% for day in month.days %}
              <a href="{{ url_for('main.edit_day', day=day.date.strftime('%Y-%m-%d')) }}"
                 class="cube{% if day.filled %} filled{% endif %}{% if day.date == today %} today{% endif %}"
                 title="{{ day.date.strftime('%Y-%m-%d') }}"></a>
            {% endfor %}
          </div>
        </div>
      {% endfor %}
    </div>
  </main>
</body>
</html>
